<!DOCTYPE html>
<html lang="en">
<head>

    <script type="text/javascript" src="https://miro.com/app/static/sdk.1.1.js"></script>

  <meta charset="UTF-8">
  <title>create card</title>

  <script>

    async function createWidget() {

      console.log('In create widget');

      let newsticker = await miro.board.widgets.create([
        {type: 'sticker', text: 'I am sticker'}
      ])

      /*let sticker = await miro.board.widgets.get({type: 'sticker'})
      console.log(sticker[0].id);

      console.log(typeof(sticker));

      if(typeof(sticker) === 'undefined'){

        console.log('Create the sticker');
        // always create sticker
        let newsticker = await miro.board.widgets.create([
          {type: 'sticker', text: 'I am sticker'}
        ])
      }
      else {
        console.log('Hide the sticker');
        await miro.board.widgets.deleteById(sticker[0].id);
      } */
    }

    const options = {
      draggableItemSelector: '#box',
      onClick: async (targetElement) => {
        createWidget()
      },

    }

    miro.onReady(() => {
      miro.board.ui.initDraggableItemsContainer(document.body, options);

      miro.initialize({
        extensionPoints: {
          bottomBar: {
            title: 'Create sticker',
            svgIcon:  ' <rect x="2" y="2" rx="2" ry="2" width="18" height="18" fill="red" stroke="currentColor" stroke-width="2" />',
            onClick: async (targetElement) => {
              createWidget();
            }
          }
        }
      });

    })





 </script>
</head>
<body>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>

    <script type="text/javascript" src="https://miro.com/app/static/sdk.1.1.js"></script>

  <meta charset="UTF-8">
  <title>create card</title>

  <script>

    async function hideShowWidget() {

      // Create sticker and card with tag 'Red tag'
      let widgets = await miro.board.widgets.create([
        {type: 'sticker', text: 'I am sticker'}
      ])
      miro.board.tags.create({title: 'Red tag', color: '#F24726', widgetIds: widgets})

      // And then find all widgets with tag 'Red tag'
      let tags = await miro.board.tags.get({title: 'Red tag'})
      console.log(tags[0].widgetIds);

      if(tags !== null){
        console.log('Hide the widget');
      }
    }

    const options = {
      draggableItemSelector: '#box',
      onClick: async (targetElement) => {
        hideShowWidget()
      },

    }

    miro.onReady(() => {
      miro.board.ui.initDraggableItemsContainer(document.body, options);

      miro.initialize({
        extensionPoints: {
          toolBar: {
            title: 'Create sticker',
            svgIcon:  ' <rect x="2" y="2" rx="2" ry="2" width="18" height="18" fill="red" stroke="currentColor" stroke-width="2" />',
            onClick: async (targetElement) => {
              hideShowWidget();
            }
          }
        }
      });

    })





 </script>
</head>
<body>

</body>
</html>
